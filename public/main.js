'use strict';

var app = angular.module('main', ['ui.router']);

app.config(function ($urlRouterProvider) {
  $urlRouterProvider.otherwise('/');
});

app.controller('DashboardCtrl', function ($scope) {
  //code
  console.log('inside DashboardCtrl');
});

app.config(function ($stateProvider) {
  $stateProvider.state('dashboardState', {
    url: '/test',
    templateUrl: './app/dashboard/dashboard.html'
  });
});

app.controller('ExplorerCtrl', function ($scope, $element, vidConstants) {
  // Code to make the 'file holder div' take in
  // file path names
  var homedir = process.platform === 'win32' ? process.env.HOMEPATH : process.env.HOME;
  var shell = require('electron').shell;
  // var finder = require('./server/algorithms/search.js')
  var fs = require('fs');
  var path = require('path');
  var find = require('findit');
  var parseVideo = require('video-name-parser');

  //Button called "browse", opens homedirectory of user
  $scope.openHome = function () {
    return shell.showItemInFolder(homedir);
  };

  // --------------------------
  // Code that allows you to recurse through the directories
  //provided and return file names that end with certain exts

  var holder = document.getElementById('fileholder');
  holder.ondragover = function () {
    this.className = 'hover';
    return false;
  };
  holder.ondragleave = function () {
    this.className = '';
    return false;
  };
  holder.ondrop = function (e) {
    var dataPathArray = [];
    var soln = [];
    e.preventDefault();
    for (var i = 0; i < e.dataTransfer.files.length; ++i) {
      dataPathArray.push(e.dataTransfer.files[i].path);
    }
    dataPathArray.forEach(function (data) {
      var finder = find(data);
      finder.on('file', function (file, stat) {
        if (vidConstants.vidExtensions.indexOf(path.extname(file)) !== -1) {
          var parsed = parseVideo(file);
          soln.push(parsed);
        }
        console.log("Thank you for your patience!");
      });
      finder.on('end', function (file, stat) {
        // soln.forEach()
        console.log('soln', soln);
      });
    });
    return false;
  };
});

app.factory('vidConstants', function () {
  return {
    vidExtensions: ['.mkv', '.avi', '.mov', '.gifv', '.flv']
  };
});

app.config(function ($stateProvider) {
  $stateProvider.state('explorerState', {
    url: '/',
    templateUrl: './app/explorer/explorer.html',
    controller: 'ExplorerCtrl'
  });
});

app.controller('SidebarCtrl', function ($scope) {
  $scope.menuActive = false;
  //
  var wrapper = document.getElementById('sidebar-wrapper');
  $scope.toggleMenu = function (e) {
    // wrapper.toggleClass("toggled");
    $scope.menuActive = !$scope.menuActive;
  };
});

app.directive('sidebar', function () {
  return {
    restrict: 'E',
    templateUrl: './app/directives/sidebar/index.html'
  };
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImRhc2hib2FyZC9kYXNoYm9hcmQuY29udHJvbGxlci5qcyIsImRhc2hib2FyZC9kYXNoYm9hcmQuc3RhdGUuanMiLCJleHBsb3Jlci9leHBsb3Jlci5jb250cm9sbGVyLmpzIiwiZXhwbG9yZXIvZXhwbG9yZXIuc3RhdGUuanMiLCJkaXJlY3RpdmVzL3NpZGViYXIvc2lkZWJhci5jb250cm9sbGVyLmpzIiwiZGlyZWN0aXZlcy9zaWRlYmFyL3NpZGViYXIuZGlyZWN0aXZlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBQSxHQUFBLEdBQUEsT0FBQSxDQUFBLE1BQUEsQ0FBQSxNQUFBLEVBQUEsQ0FBQSxXQUFBLENBQUEsQ0FBQSxDQUFBOztBQUVBLEdBQUEsQ0FBQSxNQUFBLENBQUEsVUFBQSxrQkFBQSxFQUFBO0FBQ0Esb0JBQUEsQ0FBQSxTQUFBLENBQUEsR0FBQSxDQUFBLENBQUE7Q0FDQSxDQUFBLENBQUE7O0FDSkEsR0FBQSxDQUFBLFVBQUEsQ0FBQSxlQUFBLEVBQUEsVUFBQSxNQUFBLEVBQUE7O0FBRUEsU0FBQSxDQUFBLEdBQUEsQ0FBQSxzQkFBQSxDQUFBLENBQUE7Q0FDQSxDQUFBLENBQUE7O0FDSEEsR0FBQSxDQUFBLE1BQUEsQ0FBQSxVQUFBLGNBQUEsRUFBQTtBQUNBLGdCQUFBLENBQUEsS0FBQSxDQUFBLGdCQUFBLEVBQUE7QUFDQSxPQUFBLEVBQUEsT0FBQTtBQUNBLGVBQUEsRUFBQSxnQ0FBQTtHQUNBLENBQUEsQ0FBQTtDQUNBLENBQUEsQ0FBQTs7QUNMQSxHQUFBLENBQUEsVUFBQSxDQUFBLGNBQUEsRUFBQSxVQUFBLE1BQUEsRUFBQSxRQUFBLEVBQUEsWUFBQSxFQUFBOzs7QUFHQSxNQUFBLE9BQUEsR0FBQSxPQUFBLENBQUEsUUFBQSxLQUFBLE9BQUEsR0FBQSxPQUFBLENBQUEsR0FBQSxDQUFBLFFBQUEsR0FDQSxPQUFBLENBQUEsR0FBQSxDQUFBLElBQUEsQ0FBQTtBQUNBLE1BQUEsS0FBQSxHQUFBLE9BQUEsQ0FBQSxVQUFBLENBQUEsQ0FBQSxLQUFBLENBQUE7O0FBRUEsTUFBQSxFQUFBLEdBQUEsT0FBQSxDQUFBLElBQUEsQ0FBQSxDQUFBO0FBQ0EsTUFBQSxJQUFBLEdBQUEsT0FBQSxDQUFBLE1BQUEsQ0FBQSxDQUFBO0FBQ0EsTUFBQSxJQUFBLEdBQUEsT0FBQSxDQUFBLFFBQUEsQ0FBQSxDQUFBO0FBQ0EsTUFBQSxVQUFBLEdBQUEsT0FBQSxDQUFBLG1CQUFBLENBQUEsQ0FBQTs7O0FBR0EsUUFBQSxDQUFBLFFBQUEsR0FBQSxZQUFBO0FBQ0EsV0FBQSxLQUFBLENBQUEsZ0JBQUEsQ0FBQSxPQUFBLENBQUEsQ0FBQTtHQUNBLENBQUE7Ozs7OztBQU1BLE1BQUEsTUFBQSxHQUFBLFFBQUEsQ0FBQSxjQUFBLENBQUEsWUFBQSxDQUFBLENBQUE7QUFDQSxRQUFBLENBQUEsVUFBQSxHQUFBLFlBQUE7QUFDQSxRQUFBLENBQUEsU0FBQSxHQUFBLE9BQUEsQ0FBQTtBQUNBLFdBQUEsS0FBQSxDQUFBO0dBQ0EsQ0FBQTtBQUNBLFFBQUEsQ0FBQSxXQUFBLEdBQUEsWUFBQTtBQUNBLFFBQUEsQ0FBQSxTQUFBLEdBQUEsRUFBQSxDQUFBO0FBQ0EsV0FBQSxLQUFBLENBQUE7R0FDQSxDQUFBO0FBQ0EsUUFBQSxDQUFBLE1BQUEsR0FBQSxVQUFBLENBQUEsRUFBQTtBQUNBLFFBQUEsYUFBQSxHQUFBLEVBQUEsQ0FBQTtBQUNBLFFBQUEsSUFBQSxHQUFBLEVBQUEsQ0FBQTtBQUNBLEtBQUEsQ0FBQSxjQUFBLEVBQUEsQ0FBQTtBQUNBLFNBQUEsSUFBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBLENBQUEsR0FBQSxDQUFBLENBQUEsWUFBQSxDQUFBLEtBQUEsQ0FBQSxNQUFBLEVBQUEsRUFBQSxDQUFBLEVBQUE7QUFDQSxtQkFBQSxDQUFBLElBQUEsQ0FBQSxDQUFBLENBQUEsWUFBQSxDQUFBLEtBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQTtLQUNBO0FBQ0EsaUJBQUEsQ0FBQSxPQUFBLENBQUEsVUFBQSxJQUFBLEVBQUE7QUFDQSxVQUFBLE1BQUEsR0FBQSxJQUFBLENBQUEsSUFBQSxDQUFBLENBQUE7QUFDQSxZQUFBLENBQUEsRUFBQSxDQUFBLE1BQUEsRUFBQSxVQUFBLElBQUEsRUFBQSxJQUFBLEVBQUE7QUFDQSxZQUFBLFlBQUEsQ0FBQSxhQUFBLENBQUEsT0FBQSxDQUFBLElBQUEsQ0FBQSxPQUFBLENBQUEsSUFBQSxDQUFBLENBQUEsS0FDQSxDQUFBLENBQUEsRUFBQTtBQUNBLGNBQUEsTUFBQSxHQUFBLFVBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQTtBQUNBLGNBQUEsQ0FBQSxJQUFBLENBQUEsTUFBQSxDQUFBLENBQUE7U0FDQTtBQUNBLGVBQUEsQ0FBQSxHQUFBLENBQUEsOEJBQUEsQ0FBQSxDQUFBO09BQ0EsQ0FBQSxDQUFBO0FBQ0EsWUFBQSxDQUFBLEVBQUEsQ0FBQSxLQUFBLEVBQUEsVUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBOztBQUVBLGVBQUEsQ0FBQSxHQUFBLENBQUEsTUFBQSxFQUFBLElBQUEsQ0FBQSxDQUFBO09BQ0EsQ0FBQSxDQUFBO0tBQ0EsQ0FBQSxDQUFBO0FBQ0EsV0FBQSxLQUFBLENBQUE7R0FDQSxDQUFBO0NBQ0EsQ0FBQSxDQUFBOztBQUdBLEdBQUEsQ0FBQSxPQUFBLENBQUEsY0FBQSxFQUFBLFlBQUE7QUFDQSxTQUFBO0FBQ0EsaUJBQUEsRUFBQSxDQUFBLE1BQUEsRUFBQSxNQUFBLEVBQUEsTUFBQSxFQUFBLE9BQUEsRUFBQSxNQUFBLENBQUE7R0FDQSxDQUFBO0NBQ0EsQ0FBQSxDQUFBOztBQzdEQSxHQUFBLENBQUEsTUFBQSxDQUFBLFVBQUEsY0FBQSxFQUFBO0FBQ0EsZ0JBQUEsQ0FBQSxLQUFBLENBQUEsZUFBQSxFQUFBO0FBQ0EsT0FBQSxFQUFBLEdBQUE7QUFDQSxlQUFBLEVBQUEsOEJBQUE7QUFDQSxjQUFBLEVBQUEsY0FBQTtHQUNBLENBQUEsQ0FBQTtDQUNBLENBQUEsQ0FBQTs7QUNOQSxHQUFBLENBQUEsVUFBQSxDQUFBLGFBQUEsRUFBQSxVQUFBLE1BQUEsRUFBQTtBQUNBLFFBQUEsQ0FBQSxVQUFBLEdBQUEsS0FBQSxDQUFBOztBQUVBLE1BQUEsT0FBQSxHQUFBLFFBQUEsQ0FBQSxjQUFBLENBQUEsaUJBQUEsQ0FBQSxDQUFBO0FBQ0EsUUFBQSxDQUFBLFVBQUEsR0FBQSxVQUFBLENBQUEsRUFBQTs7QUFFQSxVQUFBLENBQUEsVUFBQSxHQUFBLENBQUEsTUFBQSxDQUFBLFVBQUEsQ0FBQTtHQUNBLENBQUE7Q0FJQSxDQUFBLENBQUE7O0FDWEEsR0FBQSxDQUFBLFNBQUEsQ0FBQSxTQUFBLEVBQUEsWUFBQTtBQUNBLFNBQUE7QUFDQSxZQUFBLEVBQUEsR0FBQTtBQUNBLGVBQUEsRUFBQSxxQ0FBQTtHQUNBLENBQUE7Q0FDQSxDQUFBLENBQUEiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnbWFpbicsIFsndWkucm91dGVyJ10pO1xuXG5hcHAuY29uZmlnKGZ1bmN0aW9uKCR1cmxSb3V0ZXJQcm92aWRlcil7XG5cdCR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy8nKTtcbn0pXG4iLCJhcHAuY29udHJvbGxlcignRGFzaGJvYXJkQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSl7XG4gIC8vY29kZVxuICBjb25zb2xlLmxvZygnaW5zaWRlIERhc2hib2FyZEN0cmwnKVxufSlcbiIsImFwcC5jb25maWcoZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIpe1xuICAkc3RhdGVQcm92aWRlci5zdGF0ZSgnZGFzaGJvYXJkU3RhdGUnLCB7XG4gICAgdXJsOiAnL3Rlc3QnLFxuICAgIHRlbXBsYXRlVXJsOiAnLi9hcHAvZGFzaGJvYXJkL2Rhc2hib2FyZC5odG1sJ1xuICB9KVxufSlcbiIsImFwcC5jb250cm9sbGVyKCdFeHBsb3JlckN0cmwnLCBmdW5jdGlvbigkc2NvcGUsICRlbGVtZW50LCB2aWRDb25zdGFudHMpIHtcbiAgLy8gQ29kZSB0byBtYWtlIHRoZSAnZmlsZSBob2xkZXIgZGl2JyB0YWtlIGluXG4gIC8vIGZpbGUgcGF0aCBuYW1lc1xuICB2YXIgaG9tZWRpciA9IChwcm9jZXNzLnBsYXRmb3JtID09PSAnd2luMzInKSA/IHByb2Nlc3MuZW52LkhPTUVQQVRIIDpcbiAgICBwcm9jZXNzLmVudi5IT01FO1xuICBjb25zdCBzaGVsbCA9IHJlcXVpcmUoJ2VsZWN0cm9uJykuc2hlbGw7XG4gIC8vIHZhciBmaW5kZXIgPSByZXF1aXJlKCcuL3NlcnZlci9hbGdvcml0aG1zL3NlYXJjaC5qcycpXG4gIHZhciBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG4gIHZhciBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuICB2YXIgZmluZCA9IHJlcXVpcmUoJ2ZpbmRpdCcpO1xuICB2YXIgcGFyc2VWaWRlbyA9IHJlcXVpcmUoJ3ZpZGVvLW5hbWUtcGFyc2VyJyk7XG5cbiAgLy9CdXR0b24gY2FsbGVkIFwiYnJvd3NlXCIsIG9wZW5zIGhvbWVkaXJlY3Rvcnkgb2YgdXNlclxuICAkc2NvcGUub3BlbkhvbWUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gc2hlbGwuc2hvd0l0ZW1JbkZvbGRlcihob21lZGlyKTtcbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIENvZGUgdGhhdCBhbGxvd3MgeW91IHRvIHJlY3Vyc2UgdGhyb3VnaCB0aGUgZGlyZWN0b3JpZXNcbiAgLy9wcm92aWRlZCBhbmQgcmV0dXJuIGZpbGUgbmFtZXMgdGhhdCBlbmQgd2l0aCBjZXJ0YWluIGV4dHNcblxuICB2YXIgaG9sZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGVob2xkZXInKTtcbiAgaG9sZGVyLm9uZHJhZ292ZXIgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmNsYXNzTmFtZSA9ICdob3Zlcic7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuICBob2xkZXIub25kcmFnbGVhdmUgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmNsYXNzTmFtZSA9ICcnO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcbiAgaG9sZGVyLm9uZHJvcCA9IGZ1bmN0aW9uKGUpIHtcbiAgICB2YXIgZGF0YVBhdGhBcnJheSA9IFtdO1xuICAgIHZhciBzb2xuID0gW107XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZS5kYXRhVHJhbnNmZXIuZmlsZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgIGRhdGFQYXRoQXJyYXkucHVzaChlLmRhdGFUcmFuc2Zlci5maWxlc1tpXS5wYXRoKTtcbiAgICB9XG4gICAgZGF0YVBhdGhBcnJheS5mb3JFYWNoKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIHZhciBmaW5kZXIgPSBmaW5kKGRhdGEpO1xuICAgICAgZmluZGVyLm9uKCdmaWxlJywgZnVuY3Rpb24oZmlsZSwgc3RhdCkge1xuICAgICAgICBpZiAodmlkQ29uc3RhbnRzLnZpZEV4dGVuc2lvbnMuaW5kZXhPZihwYXRoLmV4dG5hbWUoZmlsZSkpICE9PVxuICAgICAgICAgIC0xKSB7XG4gICAgICAgICAgdmFyIHBhcnNlZCA9IHBhcnNlVmlkZW8oZmlsZSk7XG4gICAgICAgICAgc29sbi5wdXNoKHBhcnNlZCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coXCJUaGFuayB5b3UgZm9yIHlvdXIgcGF0aWVuY2UhXCIpO1xuICAgICAgfSlcbiAgICAgIGZpbmRlci5vbignZW5kJywgZnVuY3Rpb24oZmlsZSwgc3RhdCkge1xuICAgICAgICAvLyBzb2xuLmZvckVhY2goKVxuICAgICAgICBjb25zb2xlLmxvZygnc29sbicsIHNvbG4pXG4gICAgICB9KVxuICAgIH0pXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xufSk7XG5cblxuYXBwLmZhY3RvcnkoJ3ZpZENvbnN0YW50cycsIGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHZpZEV4dGVuc2lvbnM6IFsnLm1rdicsICcuYXZpJywgJy5tb3YnLCAnLmdpZnYnLCAnLmZsdiddXG4gIH1cbn0pXG4iLCJhcHAuY29uZmlnKGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyKXtcbiAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoJ2V4cGxvcmVyU3RhdGUnLCB7XG4gICAgdXJsOiAnLycsXG4gICAgdGVtcGxhdGVVcmw6ICcuL2FwcC9leHBsb3Jlci9leHBsb3Jlci5odG1sJyxcbiAgICBjb250cm9sbGVyOiAnRXhwbG9yZXJDdHJsJ1xuICB9KVxufSlcbiIsImFwcC5jb250cm9sbGVyKCdTaWRlYmFyQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAkc2NvcGUubWVudUFjdGl2ZSA9IGZhbHNlO1xuICAvL1xuICB2YXIgd3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaWRlYmFyLXdyYXBwZXInKVxuICAkc2NvcGUudG9nZ2xlTWVudSA9IGZ1bmN0aW9uKGUpIHtcbiAgICAvLyB3cmFwcGVyLnRvZ2dsZUNsYXNzKFwidG9nZ2xlZFwiKTtcbiAgICAkc2NvcGUubWVudUFjdGl2ZSA9ICEkc2NvcGUubWVudUFjdGl2ZTtcbiAgfVxuXG5cblxufSlcbiIsImFwcC5kaXJlY3RpdmUoJ3NpZGViYXInLCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIHRlbXBsYXRlVXJsOiAnLi9hcHAvZGlyZWN0aXZlcy9zaWRlYmFyL2luZGV4Lmh0bWwnXG4gIH07XG59KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
