'use strict';

var app = angular.module('main', ['ui.router, js-data']);
console.log('inside app.js');

app.config(function (DSProvider, DSLocalStorageAdapterProvider) {
  DSLocalStorageAdapterProvider.defaults.basePath = '~/Library/Application Support/Shafreeky';
}).run(function (DS, DSLocalStorageAdapter) {
  // the local storage adapter was already registered
  DS.adapters.ls === DSLocalStorageAdapter;
  // but we want to make it the default
  DS.registerAdapter('ls', DSLocalStorageAdapter, { 'default': true });
});

app.controller('DashboardCtrl', function ($scope) {
  //code
  console.log('inside DashboardCtrl');
});

app.config(function ($stateProvider) {
  $stateProvider.state('dashboardState', {
    //code
  });
});

app.factory('Cache', function (DS) {
  var LocalRecord = DS.defineResource({
    name: 'localRecord',
    imdbId: 'imdbId',
    relations: {
      hasMany: {
        timestamp: {
          localField: 'timestamp',
          foreignKey: 'timestamp.id'
        }
      }
    }
  });
  var TimeStamp = DS.defineResource({
    name: 'timestamp',
    relations: {
      belongsTo: {
        localRecord: {
          localKey: 'localRecord.id',
          localField: 'localRecord'
        }
      }
    }
  });
  var Promise = require('bluebird');
  var omdb = Promise.promisifyAll(require('omdb'));
  function findOmdb(name, year) {
    omdb.search({ title: name, year: year }).then(function (results) {});
  }
  return {
    createRecord: function createRecord(name) {
      omdb.get({ title: name }, { fullPlot: true, tomatoes: true }).then(function (record) {
        record.LocalCache.create();
      });
    }
  };
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImRhc2hib2FyZC9kYXNoYm9hcmQuY29udHJvbGxlci5qcyIsImRhc2hib2FyZC9kYXNoYm9hcmQuc3RhdGUuanMiLCJqcy9jb21tb24vZmFjdG9yaWVzL0NhY2hlRmFjdG9yeS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUEsR0FBQSxHQUFBLE9BQUEsQ0FBQSxNQUFBLENBQUEsTUFBQSxFQUFBLENBQUEsb0JBQUEsQ0FBQSxDQUFBLENBQUE7QUFDQSxPQUFBLENBQUEsR0FBQSxDQUFBLGVBQUEsQ0FBQSxDQUFBOztBQUVBLEdBQUEsQ0FBQSxNQUFBLENBQUEsVUFBQSxVQUFBLEVBQUEsNkJBQUEsRUFBQTtBQUNBLCtCQUFBLENBQUEsUUFBQSxDQUFBLFFBQUEsR0FBQSx5Q0FBQSxDQUFBO0NBQ0EsQ0FBQSxDQUNBLEdBQUEsQ0FBQSxVQUFBLEVBQUEsRUFBQSxxQkFBQSxFQUFBOztBQUVBLElBQUEsQ0FBQSxRQUFBLENBQUEsRUFBQSxLQUFBLHFCQUFBLENBQUE7O0FBRUEsSUFBQSxDQUFBLGVBQUEsQ0FBQSxJQUFBLEVBQUEscUJBQUEsRUFBQSxFQUFBLFdBQUEsSUFBQSxFQUFBLENBQUEsQ0FBQTtDQUNBLENBQUEsQ0FBQTs7QUNYQSxHQUFBLENBQUEsVUFBQSxDQUFBLGVBQUEsRUFBQSxVQUFBLE1BQUEsRUFBQTs7QUFFQSxTQUFBLENBQUEsR0FBQSxDQUFBLHNCQUFBLENBQUEsQ0FBQTtDQUNBLENBQUEsQ0FBQTs7QUNIQSxHQUFBLENBQUEsTUFBQSxDQUFBLFVBQUEsY0FBQSxFQUFBO0FBQ0EsZ0JBQUEsQ0FBQSxLQUFBLENBQUEsZ0JBQUEsRUFBQTs7R0FFQSxDQUFBLENBQUE7Q0FDQSxDQUFBLENBQUE7O0FDSkEsR0FBQSxDQUFBLE9BQUEsQ0FBQSxPQUFBLEVBQUEsVUFBQSxFQUFBLEVBQUE7QUFDQSxNQUFBLFdBQUEsR0FBQSxFQUFBLENBQUEsY0FBQSxDQUFBO0FBQ0EsUUFBQSxFQUFBLGFBQUE7QUFDQSxVQUFBLEVBQUEsUUFBQTtBQUNBLGFBQUEsRUFBQTtBQUNBLGFBQUEsRUFBQTtBQUNBLGlCQUFBLEVBQUE7QUFDQSxvQkFBQSxFQUFBLFdBQUE7QUFDQSxvQkFBQSxFQUFBLGNBQUE7U0FDQTtPQUNBO0tBQ0E7R0FDQSxDQUFBLENBQUE7QUFDQSxNQUFBLFNBQUEsR0FBQSxFQUFBLENBQUEsY0FBQSxDQUFBO0FBQ0EsUUFBQSxFQUFBLFdBQUE7QUFDQSxhQUFBLEVBQUE7QUFDQSxlQUFBLEVBQUE7QUFDQSxtQkFBQSxFQUFBO0FBQ0Esa0JBQUEsRUFBQSxnQkFBQTtBQUNBLG9CQUFBLEVBQUEsYUFBQTtTQUNBO09BQ0E7S0FDQTtHQUNBLENBQUEsQ0FBQTtBQUNBLE1BQUEsT0FBQSxHQUFBLE9BQUEsQ0FBQSxVQUFBLENBQUEsQ0FBQTtBQUNBLE1BQUEsSUFBQSxHQUFBLE9BQUEsQ0FBQSxZQUFBLENBQUEsT0FBQSxDQUFBLE1BQUEsQ0FBQSxDQUFBLENBQUE7QUFDQSxXQUFBLFFBQUEsQ0FBQSxJQUFBLEVBQUEsSUFBQSxFQUFBO0FBQ0EsUUFBQSxDQUFBLE1BQUEsQ0FBQSxFQUFBLEtBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxDQUFBLENBQ0EsSUFBQSxDQUFBLFVBQUEsT0FBQSxFQUFBLEVBQ0EsQ0FBQSxDQUFBO0dBQ0E7QUFDQSxTQUFBO0FBQ0EsZ0JBQUEsRUFBQSxzQkFBQSxJQUFBLEVBQUE7QUFDQSxVQUFBLENBQUEsR0FBQSxDQUFBLEVBQUEsS0FBQSxFQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsUUFBQSxFQUFBLElBQUEsRUFBQSxRQUFBLEVBQUEsSUFBQSxFQUFBLENBQUEsQ0FDQSxJQUFBLENBQUEsVUFBQSxNQUFBLEVBQUE7QUFDQSxjQUFBLENBQ0EsVUFBQSxDQUFBLE1BQUEsRUFBQSxDQUFBO09BQ0EsQ0FBQSxDQUFBO0tBQ0E7R0FDQSxDQUFBO0NBQ0EsQ0FBQSxDQUFBIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ21haW4nLCBbJ3VpLnJvdXRlciwganMtZGF0YSddKTtcbmNvbnNvbGUubG9nKCdpbnNpZGUgYXBwLmpzJyk7XG5cbmFwcC5jb25maWcoZnVuY3Rpb24oRFNQcm92aWRlciwgRFNMb2NhbFN0b3JhZ2VBZGFwdGVyUHJvdmlkZXIpIHtcbiAgRFNMb2NhbFN0b3JhZ2VBZGFwdGVyUHJvdmlkZXIuZGVmYXVsdHMuYmFzZVBhdGggPSAnfi9MaWJyYXJ5L0FwcGxpY2F0aW9uIFN1cHBvcnQvU2hhZnJlZWt5Jztcbn0pXG4ucnVuKGZ1bmN0aW9uIChEUywgRFNMb2NhbFN0b3JhZ2VBZGFwdGVyKSB7XG4gIC8vIHRoZSBsb2NhbCBzdG9yYWdlIGFkYXB0ZXIgd2FzIGFscmVhZHkgcmVnaXN0ZXJlZFxuICBEUy5hZGFwdGVycy5scyA9PT0gRFNMb2NhbFN0b3JhZ2VBZGFwdGVyO1xuICAvLyBidXQgd2Ugd2FudCB0byBtYWtlIGl0IHRoZSBkZWZhdWx0XG4gIERTLnJlZ2lzdGVyQWRhcHRlcignbHMnLCBEU0xvY2FsU3RvcmFnZUFkYXB0ZXIsIHsgZGVmYXVsdDogdHJ1ZSB9KTtcbn0pO1xuIiwiYXBwLmNvbnRyb2xsZXIoJ0Rhc2hib2FyZEN0cmwnLCBmdW5jdGlvbigkc2NvcGUpe1xuICAvL2NvZGVcbiAgY29uc29sZS5sb2coJ2luc2lkZSBEYXNoYm9hcmRDdHJsJylcbn0pXG4iLCJhcHAuY29uZmlnKGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyKXtcbiAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoJ2Rhc2hib2FyZFN0YXRlJywge1xuICAgIC8vY29kZVxuICB9KVxufSlcbiIsImFwcC5mYWN0b3J5KCdDYWNoZScsIGZ1bmN0aW9uKERTKSB7XG4gIHZhciBMb2NhbFJlY29yZCA9IERTLmRlZmluZVJlc291cmNlKHtcbiAgICBuYW1lOiAnbG9jYWxSZWNvcmQnLFxuICAgIGltZGJJZDogJ2ltZGJJZCcsXG4gICAgcmVsYXRpb25zOiB7XG4gICAgICBoYXNNYW55OiB7XG4gICAgICAgIHRpbWVzdGFtcDoge1xuICAgICAgICAgIGxvY2FsRmllbGQ6ICd0aW1lc3RhbXAnLFxuICAgICAgICAgIGZvcmVpZ25LZXk6ICd0aW1lc3RhbXAuaWQnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICB2YXIgVGltZVN0YW1wID0gRFMuZGVmaW5lUmVzb3VyY2Uoe1xuICAgIG5hbWU6ICd0aW1lc3RhbXAnLFxuICAgIHJlbGF0aW9uczoge1xuICAgICAgYmVsb25nc1RvOiB7XG4gICAgICAgIGxvY2FsUmVjb3JkOiB7XG4gICAgICAgICAgbG9jYWxLZXk6ICdsb2NhbFJlY29yZC5pZCcsXG4gICAgICAgICAgbG9jYWxGaWVsZDogJ2xvY2FsUmVjb3JkJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgdmFyIFByb21pc2UgPSByZXF1aXJlKCdibHVlYmlyZCcpO1xuICB2YXIgb21kYiA9IFByb21pc2UucHJvbWlzaWZ5QWxsKHJlcXVpcmUoJ29tZGInKSk7XG4gIGZ1bmN0aW9uIGZpbmRPbWRiIChuYW1lLCB5ZWFyKSB7XG4gICAgb21kYi5zZWFyY2goe3RpdGxlOiBuYW1lLCB5ZWFyOiB5ZWFyfSlcbiAgICAudGhlbihmdW5jdGlvbihyZXN1bHRzKSB7XG4gICAgfSlcbiAgfVxuICByZXR1cm4ge1xuICAgIGNyZWF0ZVJlY29yZDogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgIG9tZGIuZ2V0KHt0aXRsZTogbmFtZX0sIHtmdWxsUGxvdDogdHJ1ZSwgdG9tYXRvZXM6IHRydWV9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24ocmVjb3JkKSB7XG4gICAgICAgIHJlY29yZC5cbiAgICAgICAgTG9jYWxDYWNoZS5jcmVhdGUoKVxuICAgICAgfSlcbiAgICB9XG4gIH1cbn0pXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
